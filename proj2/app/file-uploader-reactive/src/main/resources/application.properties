spring.config.import=optional:file:.env[.properties]
spring.application.name=${SPRING_APPLICATION_NAME:file-uploader-reactive}
server.port=${SERVER_PORT:8080}

# Reactive DB
spring.r2dbc.url=${R2DBC_URL:r2dbc:postgresql://localhost:5432/file_uploader}
spring.r2dbc.username=${R2DBC_USERNAME:postgres}
spring.r2dbc.password=${R2DBC_PASSWORD:postgres}

# DB migrations (Django-like model evolution)
spring.flyway.enabled=true
spring.flyway.url=${JDBC_URL:jdbc:postgresql://localhost:5432/file_uploader}
spring.flyway.user=${JDBC_USERNAME:postgres}
spring.flyway.password=${JDBC_PASSWORD:postgres}
spring.flyway.locations=classpath:db/migration

# Multipart limits (WebFlux)
spring.codec.max-in-memory-size=1MB

# Management
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=never

# App-specific config
app.upload.max-file-size=${APP_UPLOAD_MAX_FILE_SIZE:500MB}
app.upload.max-request-size=${APP_UPLOAD_MAX_REQUEST_SIZE:500MB}
app.upload.timeout=${APP_UPLOAD_TIMEOUT:PT5M}

app.storage.endpoint=${APP_STORAGE_ENDPOINT:http://localhost:9000}
app.storage.bucket=${APP_STORAGE_BUCKET:uploads}
app.storage.access-key=${APP_STORAGE_ACCESS_KEY:minioadmin}
app.storage.secret-key=${APP_STORAGE_SECRET_KEY:minioadmin}
